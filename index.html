<!DOCTYPE html><html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pixel Survivors — Echoes of Hope</title>
  <style>
    body { background:#0e0e0e; color:#eaeaea; font-family: monospace; margin:0; display:flex; justify-content:center; }
    #wrap { max-width:900px; padding:12px; }
    canvas { image-rendering: pixelated; background:#111; border:2px solid #333; display:block; margin:auto; }
    .ui { display:flex; gap:12px; justify-content:space-between; margin:8px 0; }
    .box { border:1px solid #333; padding:6px 8px; background:#151515; }
    .hint { opacity:.8; font-size:12px; }
    button { background:#222; color:#eee; border:1px solid #444; padding:6px 10px; cursor:pointer; }
    button:hover { background:#2a2a2a; }
  </style>
</head>
<body>
<div id="wrap">
  <h2>Pixel Survivors — Echoes of Hope</h2>
  <div class="ui">
    <div class="box">Vida: <span id="hp">100</span> | Balas: <span id="ammo">12</span> | Fase: <span id="stage">1</span></div>
    <div class="box hint">Mover: WASD | Atirar: Espaço | Interagir: E</div>
  </div>
  <canvas id="game" width="320" height="180"></canvas>
  <div class="ui">
    <div class="box" id="story"></div>
    <button onclick="resetGame()">Reiniciar</button>
  </div>
</div>
<script>
const c = document.getElementById('game');
const ctx = c.getContext('2d');
ctx.imageSmoothingEnabled = false;const TILE = 10; let keys = {}; let lastShot = 0;

const player = { x: 30, y: 30, w: 8, h: 8, hp: 100, ammo: 12 }; let bullets = []; let enemies = []; let stage = 1; let storyState = 'start';

const storyBox = document.getElementById('story'); const hpEl = document.getElementById('hp'); const ammoEl = document.getElementById('ammo'); const stageEl = document.getElementById('stage');

const stories = { start: 'PRÓLOGO — O mundo caiu após uma infecção. Você protege uma criança e precisa chegar ao abrigo da cidade velha. Limpe a área e siga em frente.', mid: 'MEIO — O abrigo foi invadido. Há poucos suprimentos e muitos infectados. Sobreviva e ligue o gerador.', end: 'FINAL — O sinal foi enviado. Um grupo responde. Você escolhe ficar e proteger quem restou. FIM.' };

function spawnEnemies(n){ enemies = []; for(let i=0;i<n;i++){ enemies.push({ x: Math.random()*300+10, y: Math.random()*160+10, w:8, h:8, hp: 20 }); } }

function setStory(){ storyBox.textContent = stories[storyState]; }

function resetGame(){ player.x=30; player.y=30; player.hp=100; player.ammo=12; bullets=[]; stage=1; storyState='start'; spawnEnemies(6); setStory(); }

function shoot(){ const now = performance.now(); if(player.ammo<=0 || now-lastShot<200) return; lastShot = now; player.ammo--; bullets.push({ x: player.x+4, y: player.y+4, vx: 2, vy: 0 }); }

function update(){ if(keys['w']) player.y-=1; if(keys['s']) player.y+=1; if(keys['a']) player.x
